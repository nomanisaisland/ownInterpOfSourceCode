{"ast":null,"code":"/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * \r\n */\nimport ReactSharedInternals from 'shared/ReactSharedInternals';\nimport { warnsIfNotActing } from './ReactFiberHostConfig';\nconst {\n  ReactCurrentActQueue\n} = ReactSharedInternals;\nexport function isLegacyActEnvironment(fiber) {\n  if (__DEV__) {\n    // Legacy mode. We preserve the behavior of React 17's act. It assumes an\n    // act environment whenever `jest` is defined, but you can still turn off\n    // spurious warnings by setting IS_REACT_ACT_ENVIRONMENT explicitly\n    // to false.\n    const isReactActEnvironmentGlobal = // $FlowExpectedError – Flow doesn't know about IS_REACT_ACT_ENVIRONMENT global\n    typeof IS_REACT_ACT_ENVIRONMENT !== 'undefined' ? IS_REACT_ACT_ENVIRONMENT : undefined; // $FlowExpectedError - Flow doesn't know about jest\n\n    const jestIsDefined = typeof jest !== 'undefined';\n    return warnsIfNotActing && jestIsDefined && isReactActEnvironmentGlobal !== false;\n  }\n\n  return false;\n}\nexport function isConcurrentActEnvironment() {\n  if (__DEV__) {\n    const isReactActEnvironmentGlobal = // $FlowExpectedError – Flow doesn't know about IS_REACT_ACT_ENVIRONMENT global\n    typeof IS_REACT_ACT_ENVIRONMENT !== 'undefined' ? IS_REACT_ACT_ENVIRONMENT : undefined;\n\n    if (!isReactActEnvironmentGlobal && ReactCurrentActQueue.current !== null) {\n      // TODO: Include link to relevant documentation page.\n      console.error('The current testing environment is not configured to support ' + 'act(...)');\n    }\n\n    return isReactActEnvironmentGlobal;\n  }\n\n  return false;\n}","map":{"version":3,"names":["ReactSharedInternals","warnsIfNotActing","ReactCurrentActQueue","isLegacyActEnvironment","fiber","__DEV__","isReactActEnvironmentGlobal","IS_REACT_ACT_ENVIRONMENT","undefined","jestIsDefined","jest","isConcurrentActEnvironment","current","console","error"],"sources":["E:/debug-anything/react-test/src/react/packages/react-reconciler/src/ReactFiberAct.old.js"],"sourcesContent":["/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow\r\n */\r\n\r\nimport type {Fiber} from './ReactFiber.old';\r\n\r\nimport ReactSharedInternals from 'shared/ReactSharedInternals';\r\n\r\nimport {warnsIfNotActing} from './ReactFiberHostConfig';\r\n\r\nconst {ReactCurrentActQueue} = ReactSharedInternals;\r\n\r\nexport function isLegacyActEnvironment(fiber: Fiber) {\r\n  if (__DEV__) {\r\n    // Legacy mode. We preserve the behavior of React 17's act. It assumes an\r\n    // act environment whenever `jest` is defined, but you can still turn off\r\n    // spurious warnings by setting IS_REACT_ACT_ENVIRONMENT explicitly\r\n    // to false.\r\n\r\n    const isReactActEnvironmentGlobal =\r\n      // $FlowExpectedError – Flow doesn't know about IS_REACT_ACT_ENVIRONMENT global\r\n      typeof IS_REACT_ACT_ENVIRONMENT !== 'undefined'\r\n        ? IS_REACT_ACT_ENVIRONMENT\r\n        : undefined;\r\n\r\n    // $FlowExpectedError - Flow doesn't know about jest\r\n    const jestIsDefined = typeof jest !== 'undefined';\r\n    return (\r\n      warnsIfNotActing && jestIsDefined && isReactActEnvironmentGlobal !== false\r\n    );\r\n  }\r\n  return false;\r\n}\r\n\r\nexport function isConcurrentActEnvironment() {\r\n  if (__DEV__) {\r\n    const isReactActEnvironmentGlobal =\r\n      // $FlowExpectedError – Flow doesn't know about IS_REACT_ACT_ENVIRONMENT global\r\n      typeof IS_REACT_ACT_ENVIRONMENT !== 'undefined'\r\n        ? IS_REACT_ACT_ENVIRONMENT\r\n        : undefined;\r\n\r\n    if (!isReactActEnvironmentGlobal && ReactCurrentActQueue.current !== null) {\r\n      // TODO: Include link to relevant documentation page.\r\n      console.error(\r\n        'The current testing environment is not configured to support ' +\r\n          'act(...)',\r\n      );\r\n    }\r\n    return isReactActEnvironmentGlobal;\r\n  }\r\n  return false;\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA,OAAOA,oBAAP,MAAiC,6BAAjC;AAEA,SAAQC,gBAAR,QAA+B,wBAA/B;AAEA,MAAM;EAACC;AAAD,IAAyBF,oBAA/B;AAEA,OAAO,SAASG,sBAAT,CAAgCC,KAAhC,EAA8C;EACnD,IAAIC,OAAJ,EAAa;IACX;IACA;IACA;IACA;IAEA,MAAMC,2BAA2B,GAC/B;IACA,OAAOC,wBAAP,KAAoC,WAApC,GACIA,wBADJ,GAEIC,SAJN,CANW,CAYX;;IACA,MAAMC,aAAa,GAAG,OAAOC,IAAP,KAAgB,WAAtC;IACA,OACET,gBAAgB,IAAIQ,aAApB,IAAqCH,2BAA2B,KAAK,KADvE;EAGD;;EACD,OAAO,KAAP;AACD;AAED,OAAO,SAASK,0BAAT,GAAsC;EAC3C,IAAIN,OAAJ,EAAa;IACX,MAAMC,2BAA2B,GAC/B;IACA,OAAOC,wBAAP,KAAoC,WAApC,GACIA,wBADJ,GAEIC,SAJN;;IAMA,IAAI,CAACF,2BAAD,IAAgCJ,oBAAoB,CAACU,OAArB,KAAiC,IAArE,EAA2E;MACzE;MACAC,OAAO,CAACC,KAAR,CACE,kEACE,UAFJ;IAID;;IACD,OAAOR,2BAAP;EACD;;EACD,OAAO,KAAP;AACD"},"metadata":{},"sourceType":"module"}