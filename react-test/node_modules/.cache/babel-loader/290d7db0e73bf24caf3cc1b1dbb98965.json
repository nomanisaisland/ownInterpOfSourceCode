{"ast":null,"code":"/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * \r\n */\nimport ReactCurrentBatchConfig from './ReactCurrentBatchConfig';\nimport { enableTransitionTracing } from 'shared/ReactFeatureFlags';\nexport function startTransition(scope, options) {\n  const prevTransition = ReactCurrentBatchConfig.transition;\n  ReactCurrentBatchConfig.transition = {};\n  const currentTransition = ReactCurrentBatchConfig.transition;\n\n  if (__DEV__) {\n    ReactCurrentBatchConfig.transition._updatedFibers = new Set();\n  }\n\n  if (enableTransitionTracing) {\n    if (options !== undefined && options.name !== undefined) {\n      ReactCurrentBatchConfig.transition.name = options.name;\n      ReactCurrentBatchConfig.transition.startTime = -1;\n    }\n  }\n\n  try {\n    scope();\n  } finally {\n    ReactCurrentBatchConfig.transition = prevTransition;\n\n    if (__DEV__) {\n      if (prevTransition === null && currentTransition._updatedFibers) {\n        const updatedFibersCount = currentTransition._updatedFibers.size;\n\n        if (updatedFibersCount > 10) {\n          console.warn('Detected a large number of updates inside startTransition. ' + 'If this is due to a subscription please re-write it to use React provided hooks. ' + 'Otherwise concurrent mode guarantees are off the table.');\n        }\n\n        currentTransition._updatedFibers.clear();\n      }\n    }\n  }\n}","map":{"version":3,"names":["ReactCurrentBatchConfig","enableTransitionTracing","startTransition","scope","options","prevTransition","transition","currentTransition","__DEV__","_updatedFibers","Set","undefined","name","startTime","updatedFibersCount","size","console","warn","clear"],"sources":["E:/debug-anything/react-test/src/react/packages/react/src/ReactStartTransition.js"],"sourcesContent":["/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow\r\n */\r\nimport type {StartTransitionOptions} from 'shared/ReactTypes';\r\n\r\nimport ReactCurrentBatchConfig from './ReactCurrentBatchConfig';\r\nimport {enableTransitionTracing} from 'shared/ReactFeatureFlags';\r\n\r\nexport function startTransition(\r\n  scope: () => void,\r\n  options?: StartTransitionOptions,\r\n) {\r\n  const prevTransition = ReactCurrentBatchConfig.transition;\r\n  ReactCurrentBatchConfig.transition = {};\r\n  const currentTransition = ReactCurrentBatchConfig.transition;\r\n\r\n  if (__DEV__) {\r\n    ReactCurrentBatchConfig.transition._updatedFibers = new Set();\r\n  }\r\n\r\n  if (enableTransitionTracing) {\r\n    if (options !== undefined && options.name !== undefined) {\r\n      ReactCurrentBatchConfig.transition.name = options.name;\r\n      ReactCurrentBatchConfig.transition.startTime = -1;\r\n    }\r\n  }\r\n\r\n  try {\r\n    scope();\r\n  } finally {\r\n    ReactCurrentBatchConfig.transition = prevTransition;\r\n\r\n    if (__DEV__) {\r\n      if (prevTransition === null && currentTransition._updatedFibers) {\r\n        const updatedFibersCount = currentTransition._updatedFibers.size;\r\n        if (updatedFibersCount > 10) {\r\n          console.warn(\r\n            'Detected a large number of updates inside startTransition. ' +\r\n              'If this is due to a subscription please re-write it to use React provided hooks. ' +\r\n              'Otherwise concurrent mode guarantees are off the table.',\r\n          );\r\n        }\r\n        currentTransition._updatedFibers.clear();\r\n      }\r\n    }\r\n  }\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA,OAAOA,uBAAP,MAAoC,2BAApC;AACA,SAAQC,uBAAR,QAAsC,0BAAtC;AAEA,OAAO,SAASC,eAAT,CACLC,KADK,EAELC,OAFK,EAGL;EACA,MAAMC,cAAc,GAAGL,uBAAuB,CAACM,UAA/C;EACAN,uBAAuB,CAACM,UAAxB,GAAqC,EAArC;EACA,MAAMC,iBAAiB,GAAGP,uBAAuB,CAACM,UAAlD;;EAEA,IAAIE,OAAJ,EAAa;IACXR,uBAAuB,CAACM,UAAxB,CAAmCG,cAAnC,GAAoD,IAAIC,GAAJ,EAApD;EACD;;EAED,IAAIT,uBAAJ,EAA6B;IAC3B,IAAIG,OAAO,KAAKO,SAAZ,IAAyBP,OAAO,CAACQ,IAAR,KAAiBD,SAA9C,EAAyD;MACvDX,uBAAuB,CAACM,UAAxB,CAAmCM,IAAnC,GAA0CR,OAAO,CAACQ,IAAlD;MACAZ,uBAAuB,CAACM,UAAxB,CAAmCO,SAAnC,GAA+C,CAAC,CAAhD;IACD;EACF;;EAED,IAAI;IACFV,KAAK;EACN,CAFD,SAEU;IACRH,uBAAuB,CAACM,UAAxB,GAAqCD,cAArC;;IAEA,IAAIG,OAAJ,EAAa;MACX,IAAIH,cAAc,KAAK,IAAnB,IAA2BE,iBAAiB,CAACE,cAAjD,EAAiE;QAC/D,MAAMK,kBAAkB,GAAGP,iBAAiB,CAACE,cAAlB,CAAiCM,IAA5D;;QACA,IAAID,kBAAkB,GAAG,EAAzB,EAA6B;UAC3BE,OAAO,CAACC,IAAR,CACE,gEACE,mFADF,GAEE,yDAHJ;QAKD;;QACDV,iBAAiB,CAACE,cAAlB,CAAiCS,KAAjC;MACD;IACF;EACF;AACF"},"metadata":{},"sourceType":"module"}