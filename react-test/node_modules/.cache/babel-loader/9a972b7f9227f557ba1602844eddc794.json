{"ast":null,"code":"/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\nimport { shorthandToLonghand } from './CSSShorthandProperty';\nimport dangerousStyleValue from '../shared/dangerousStyleValue';\nimport hyphenateStyleName from '../shared/hyphenateStyleName';\nimport warnValidStyle from '../shared/warnValidStyle';\n/**\r\n * Operations for dealing with CSS properties.\r\n */\n\n/**\r\n * This creates a string that is expected to be equivalent to the style\r\n * attribute generated by server-side rendering. It by-passes warnings and\r\n * security checks so it's not safe to use this value for anything other than\r\n * comparison. It is only used in DEV for SSR validation.\r\n */\n\nexport function createDangerousStringForStyles(styles) {\n  if (__DEV__) {\n    let serialized = '';\n    let delimiter = '';\n\n    for (const styleName in styles) {\n      if (!styles.hasOwnProperty(styleName)) {\n        continue;\n      }\n\n      const styleValue = styles[styleName];\n\n      if (styleValue != null) {\n        const isCustomProperty = styleName.indexOf('--') === 0;\n        serialized += delimiter + (isCustomProperty ? styleName : hyphenateStyleName(styleName)) + ':';\n        serialized += dangerousStyleValue(styleName, styleValue, isCustomProperty);\n        delimiter = ';';\n      }\n    }\n\n    return serialized || null;\n  }\n}\n/**\r\n * Sets the value for multiple styles on a node.  If a value is specified as\r\n * '' (empty string), the corresponding style property will be unset.\r\n *\r\n * @param {DOMElement} node\r\n * @param {object} styles\r\n */\n\nexport function setValueForStyles(node, styles) {\n  const style = node.style;\n\n  for (let styleName in styles) {\n    if (!styles.hasOwnProperty(styleName)) {\n      continue;\n    }\n\n    const isCustomProperty = styleName.indexOf('--') === 0;\n\n    if (__DEV__) {\n      if (!isCustomProperty) {\n        warnValidStyle(styleName, styles[styleName]);\n      }\n    }\n\n    const styleValue = dangerousStyleValue(styleName, styles[styleName], isCustomProperty);\n\n    if (styleName === 'float') {\n      styleName = 'cssFloat';\n    }\n\n    if (isCustomProperty) {\n      style.setProperty(styleName, styleValue);\n    } else {\n      style[styleName] = styleValue;\n    }\n  }\n}\n\nfunction isValueEmpty(value) {\n  return value == null || typeof value === 'boolean' || value === '';\n}\n/**\r\n * Given {color: 'red', overflow: 'hidden'} returns {\r\n *   color: 'color',\r\n *   overflowX: 'overflow',\r\n *   overflowY: 'overflow',\r\n * }. This can be read as \"the overflowY property was set by the overflow\r\n * shorthand\". That is, the values are the property that each was derived from.\r\n */\n\n\nfunction expandShorthandMap(styles) {\n  const expanded = {};\n\n  for (const key in styles) {\n    const longhands = shorthandToLonghand[key] || [key];\n\n    for (let i = 0; i < longhands.length; i++) {\n      expanded[longhands[i]] = key;\n    }\n  }\n\n  return expanded;\n}\n/**\r\n * When mixing shorthand and longhand property names, we warn during updates if\r\n * we expect an incorrect result to occur. In particular, we warn for:\r\n *\r\n * Updating a shorthand property (longhand gets overwritten):\r\n *   {font: 'foo', fontVariant: 'bar'} -> {font: 'baz', fontVariant: 'bar'}\r\n *   becomes .style.font = 'baz'\r\n * Removing a shorthand property (longhand gets lost too):\r\n *   {font: 'foo', fontVariant: 'bar'} -> {fontVariant: 'bar'}\r\n *   becomes .style.font = ''\r\n * Removing a longhand property (should revert to shorthand; doesn't):\r\n *   {font: 'foo', fontVariant: 'bar'} -> {font: 'foo'}\r\n *   becomes .style.fontVariant = ''\r\n */\n\n\nexport function validateShorthandPropertyCollisionInDev(styleUpdates, nextStyles) {\n  if (__DEV__) {\n    if (!nextStyles) {\n      return;\n    }\n\n    const expandedUpdates = expandShorthandMap(styleUpdates);\n    const expandedStyles = expandShorthandMap(nextStyles);\n    const warnedAbout = {};\n\n    for (const key in expandedUpdates) {\n      const originalKey = expandedUpdates[key];\n      const correctOriginalKey = expandedStyles[key];\n\n      if (correctOriginalKey && originalKey !== correctOriginalKey) {\n        const warningKey = originalKey + ',' + correctOriginalKey;\n\n        if (warnedAbout[warningKey]) {\n          continue;\n        }\n\n        warnedAbout[warningKey] = true;\n        console.error('%s a style property during rerender (%s) when a ' + 'conflicting property is set (%s) can lead to styling bugs. To ' + \"avoid this, don't mix shorthand and non-shorthand properties \" + 'for the same value; instead, replace the shorthand with ' + 'separate values.', isValueEmpty(styleUpdates[originalKey]) ? 'Removing' : 'Updating', originalKey, correctOriginalKey);\n      }\n    }\n  }\n}","map":{"version":3,"names":["shorthandToLonghand","dangerousStyleValue","hyphenateStyleName","warnValidStyle","createDangerousStringForStyles","styles","__DEV__","serialized","delimiter","styleName","hasOwnProperty","styleValue","isCustomProperty","indexOf","setValueForStyles","node","style","setProperty","isValueEmpty","value","expandShorthandMap","expanded","key","longhands","i","length","validateShorthandPropertyCollisionInDev","styleUpdates","nextStyles","expandedUpdates","expandedStyles","warnedAbout","originalKey","correctOriginalKey","warningKey","console","error"],"sources":["E:/react-test/src/react/packages/react-dom/src/client/CSSPropertyOperations.js"],"sourcesContent":["/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport {shorthandToLonghand} from './CSSShorthandProperty';\r\n\r\nimport dangerousStyleValue from '../shared/dangerousStyleValue';\r\nimport hyphenateStyleName from '../shared/hyphenateStyleName';\r\nimport warnValidStyle from '../shared/warnValidStyle';\r\n\r\n/**\r\n * Operations for dealing with CSS properties.\r\n */\r\n\r\n/**\r\n * This creates a string that is expected to be equivalent to the style\r\n * attribute generated by server-side rendering. It by-passes warnings and\r\n * security checks so it's not safe to use this value for anything other than\r\n * comparison. It is only used in DEV for SSR validation.\r\n */\r\nexport function createDangerousStringForStyles(styles) {\r\n  if (__DEV__) {\r\n    let serialized = '';\r\n    let delimiter = '';\r\n    for (const styleName in styles) {\r\n      if (!styles.hasOwnProperty(styleName)) {\r\n        continue;\r\n      }\r\n      const styleValue = styles[styleName];\r\n      if (styleValue != null) {\r\n        const isCustomProperty = styleName.indexOf('--') === 0;\r\n        serialized +=\r\n          delimiter +\r\n          (isCustomProperty ? styleName : hyphenateStyleName(styleName)) +\r\n          ':';\r\n        serialized += dangerousStyleValue(\r\n          styleName,\r\n          styleValue,\r\n          isCustomProperty,\r\n        );\r\n\r\n        delimiter = ';';\r\n      }\r\n    }\r\n    return serialized || null;\r\n  }\r\n}\r\n\r\n/**\r\n * Sets the value for multiple styles on a node.  If a value is specified as\r\n * '' (empty string), the corresponding style property will be unset.\r\n *\r\n * @param {DOMElement} node\r\n * @param {object} styles\r\n */\r\nexport function setValueForStyles(node, styles) {\r\n  const style = node.style;\r\n  for (let styleName in styles) {\r\n    if (!styles.hasOwnProperty(styleName)) {\r\n      continue;\r\n    }\r\n    const isCustomProperty = styleName.indexOf('--') === 0;\r\n    if (__DEV__) {\r\n      if (!isCustomProperty) {\r\n        warnValidStyle(styleName, styles[styleName]);\r\n      }\r\n    }\r\n    const styleValue = dangerousStyleValue(\r\n      styleName,\r\n      styles[styleName],\r\n      isCustomProperty,\r\n    );\r\n    if (styleName === 'float') {\r\n      styleName = 'cssFloat';\r\n    }\r\n    if (isCustomProperty) {\r\n      style.setProperty(styleName, styleValue);\r\n    } else {\r\n      style[styleName] = styleValue;\r\n    }\r\n  }\r\n}\r\n\r\nfunction isValueEmpty(value) {\r\n  return value == null || typeof value === 'boolean' || value === '';\r\n}\r\n\r\n/**\r\n * Given {color: 'red', overflow: 'hidden'} returns {\r\n *   color: 'color',\r\n *   overflowX: 'overflow',\r\n *   overflowY: 'overflow',\r\n * }. This can be read as \"the overflowY property was set by the overflow\r\n * shorthand\". That is, the values are the property that each was derived from.\r\n */\r\nfunction expandShorthandMap(styles) {\r\n  const expanded = {};\r\n  for (const key in styles) {\r\n    const longhands = shorthandToLonghand[key] || [key];\r\n    for (let i = 0; i < longhands.length; i++) {\r\n      expanded[longhands[i]] = key;\r\n    }\r\n  }\r\n  return expanded;\r\n}\r\n\r\n/**\r\n * When mixing shorthand and longhand property names, we warn during updates if\r\n * we expect an incorrect result to occur. In particular, we warn for:\r\n *\r\n * Updating a shorthand property (longhand gets overwritten):\r\n *   {font: 'foo', fontVariant: 'bar'} -> {font: 'baz', fontVariant: 'bar'}\r\n *   becomes .style.font = 'baz'\r\n * Removing a shorthand property (longhand gets lost too):\r\n *   {font: 'foo', fontVariant: 'bar'} -> {fontVariant: 'bar'}\r\n *   becomes .style.font = ''\r\n * Removing a longhand property (should revert to shorthand; doesn't):\r\n *   {font: 'foo', fontVariant: 'bar'} -> {font: 'foo'}\r\n *   becomes .style.fontVariant = ''\r\n */\r\nexport function validateShorthandPropertyCollisionInDev(\r\n  styleUpdates,\r\n  nextStyles,\r\n) {\r\n  if (__DEV__) {\r\n    if (!nextStyles) {\r\n      return;\r\n    }\r\n\r\n    const expandedUpdates = expandShorthandMap(styleUpdates);\r\n    const expandedStyles = expandShorthandMap(nextStyles);\r\n    const warnedAbout = {};\r\n    for (const key in expandedUpdates) {\r\n      const originalKey = expandedUpdates[key];\r\n      const correctOriginalKey = expandedStyles[key];\r\n      if (correctOriginalKey && originalKey !== correctOriginalKey) {\r\n        const warningKey = originalKey + ',' + correctOriginalKey;\r\n        if (warnedAbout[warningKey]) {\r\n          continue;\r\n        }\r\n        warnedAbout[warningKey] = true;\r\n        console.error(\r\n          '%s a style property during rerender (%s) when a ' +\r\n            'conflicting property is set (%s) can lead to styling bugs. To ' +\r\n            \"avoid this, don't mix shorthand and non-shorthand properties \" +\r\n            'for the same value; instead, replace the shorthand with ' +\r\n            'separate values.',\r\n          isValueEmpty(styleUpdates[originalKey]) ? 'Removing' : 'Updating',\r\n          originalKey,\r\n          correctOriginalKey,\r\n        );\r\n      }\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}