{"ast":null,"code":"/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * \r\n */\nimport { disableJavaScriptURLs } from 'shared/ReactFeatureFlags'; // A javascript: URL can contain leading C0 control or \\u0020 SPACE,\n// and any newline or tab are filtered out as if they're not part of the URL.\n// https://url.spec.whatwg.org/#url-parsing\n// Tab or newline are defined as \\r\\n\\t:\n// https://infra.spec.whatwg.org/#ascii-tab-or-newline\n// A C0 control is a code point in the range \\u0000 NULL to \\u001F\n// INFORMATION SEPARATOR ONE, inclusive:\n// https://infra.spec.whatwg.org/#c0-control-or-space\n\n/* eslint-disable max-len */\n\nconst isJavaScriptProtocol = /^[\\u0000-\\u001F ]*j[\\r\\n\\t]*a[\\r\\n\\t]*v[\\r\\n\\t]*a[\\r\\n\\t]*s[\\r\\n\\t]*c[\\r\\n\\t]*r[\\r\\n\\t]*i[\\r\\n\\t]*p[\\r\\n\\t]*t[\\r\\n\\t]*\\:/i;\nlet didWarn = false;\n\nfunction sanitizeURL(url) {\n  if (disableJavaScriptURLs) {\n    if (isJavaScriptProtocol.test(url)) {\n      throw new Error('React has blocked a javascript: URL as a security precaution.');\n    }\n  } else if (__DEV__) {\n    if (!didWarn && isJavaScriptProtocol.test(url)) {\n      didWarn = true;\n      console.error('A future version of React will block javascript: URLs as a security precaution. ' + 'Use event handlers instead if you can. If you need to generate unsafe HTML try ' + 'using dangerouslySetInnerHTML instead. React was passed %s.', JSON.stringify(url));\n    }\n  }\n}\n\nexport default sanitizeURL;","map":{"version":3,"names":["disableJavaScriptURLs","isJavaScriptProtocol","didWarn","sanitizeURL","url","test","Error","__DEV__","console","error","JSON","stringify"],"sources":["E:/debug-anything/react-test/src/react/packages/react-dom/src/shared/sanitizeURL.js"],"sourcesContent":["/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow\r\n */\r\n\r\nimport {disableJavaScriptURLs} from 'shared/ReactFeatureFlags';\r\n\r\n// A javascript: URL can contain leading C0 control or \\u0020 SPACE,\r\n// and any newline or tab are filtered out as if they're not part of the URL.\r\n// https://url.spec.whatwg.org/#url-parsing\r\n// Tab or newline are defined as \\r\\n\\t:\r\n// https://infra.spec.whatwg.org/#ascii-tab-or-newline\r\n// A C0 control is a code point in the range \\u0000 NULL to \\u001F\r\n// INFORMATION SEPARATOR ONE, inclusive:\r\n// https://infra.spec.whatwg.org/#c0-control-or-space\r\n\r\n/* eslint-disable max-len */\r\nconst isJavaScriptProtocol = /^[\\u0000-\\u001F ]*j[\\r\\n\\t]*a[\\r\\n\\t]*v[\\r\\n\\t]*a[\\r\\n\\t]*s[\\r\\n\\t]*c[\\r\\n\\t]*r[\\r\\n\\t]*i[\\r\\n\\t]*p[\\r\\n\\t]*t[\\r\\n\\t]*\\:/i;\r\n\r\nlet didWarn = false;\r\n\r\nfunction sanitizeURL(url: string) {\r\n  if (disableJavaScriptURLs) {\r\n    if (isJavaScriptProtocol.test(url)) {\r\n      throw new Error(\r\n        'React has blocked a javascript: URL as a security precaution.',\r\n      );\r\n    }\r\n  } else if (__DEV__) {\r\n    if (!didWarn && isJavaScriptProtocol.test(url)) {\r\n      didWarn = true;\r\n      console.error(\r\n        'A future version of React will block javascript: URLs as a security precaution. ' +\r\n          'Use event handlers instead if you can. If you need to generate unsafe HTML try ' +\r\n          'using dangerouslySetInnerHTML instead. React was passed %s.',\r\n        JSON.stringify(url),\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default sanitizeURL;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAAQA,qBAAR,QAAoC,0BAApC,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AACA,MAAMC,oBAAoB,GAAG,2HAA7B;AAEA,IAAIC,OAAO,GAAG,KAAd;;AAEA,SAASC,WAAT,CAAqBC,GAArB,EAAkC;EAChC,IAAIJ,qBAAJ,EAA2B;IACzB,IAAIC,oBAAoB,CAACI,IAArB,CAA0BD,GAA1B,CAAJ,EAAoC;MAClC,MAAM,IAAIE,KAAJ,CACJ,+DADI,CAAN;IAGD;EACF,CAND,MAMO,IAAIC,OAAJ,EAAa;IAClB,IAAI,CAACL,OAAD,IAAYD,oBAAoB,CAACI,IAArB,CAA0BD,GAA1B,CAAhB,EAAgD;MAC9CF,OAAO,GAAG,IAAV;MACAM,OAAO,CAACC,KAAR,CACE,qFACE,iFADF,GAEE,6DAHJ,EAIEC,IAAI,CAACC,SAAL,CAAeP,GAAf,CAJF;IAMD;EACF;AACF;;AAED,eAAeD,WAAf"},"metadata":{},"sourceType":"module"}