{"ast":null,"code":"/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * \r\n */\nimport { enableDebugTracing } from 'shared/ReactFeatureFlags';\nconst nativeConsole = console;\nlet nativeConsoleLog = null;\nconst pendingGroupArgs = [];\nlet printedGroupIndex = -1;\n\nfunction formatLanes(laneOrLanes) {\n  return '0b' + laneOrLanes.toString(2).padStart(31, '0');\n}\n\nfunction group() {\n  for (var _len = arguments.length, groupArgs = new Array(_len), _key = 0; _key < _len; _key++) {\n    groupArgs[_key] = arguments[_key];\n  }\n\n  pendingGroupArgs.push(groupArgs);\n\n  if (nativeConsoleLog === null) {\n    nativeConsoleLog = nativeConsole.log;\n    nativeConsole.log = log;\n  }\n}\n\nfunction groupEnd() {\n  pendingGroupArgs.pop();\n\n  while (printedGroupIndex >= pendingGroupArgs.length) {\n    nativeConsole.groupEnd();\n    printedGroupIndex--;\n  }\n\n  if (pendingGroupArgs.length === 0) {\n    nativeConsole.log = nativeConsoleLog;\n    nativeConsoleLog = null;\n  }\n}\n\nfunction log() {\n  if (printedGroupIndex < pendingGroupArgs.length - 1) {\n    for (let i = printedGroupIndex + 1; i < pendingGroupArgs.length; i++) {\n      const groupArgs = pendingGroupArgs[i];\n      nativeConsole.group(...groupArgs);\n    }\n\n    printedGroupIndex = pendingGroupArgs.length - 1;\n  }\n\n  if (typeof nativeConsoleLog === 'function') {\n    nativeConsoleLog(...arguments);\n  } else {\n    nativeConsole.log(...arguments);\n  }\n}\n\nconst REACT_LOGO_STYLE = 'background-color: #20232a; color: #61dafb; padding: 0 2px;';\nexport function logCommitStarted(lanes) {\n  if (__DEV__) {\n    if (enableDebugTracing) {\n      group(`%c⚛️%c commit%c (${formatLanes(lanes)})`, REACT_LOGO_STYLE, '', 'font-weight: normal;');\n    }\n  }\n}\nexport function logCommitStopped() {\n  if (__DEV__) {\n    if (enableDebugTracing) {\n      groupEnd();\n    }\n  }\n}\nconst PossiblyWeakMap = typeof WeakMap === 'function' ? WeakMap : Map; // $FlowFixMe: Flow cannot handle polymorphic WeakMaps\n\nconst wakeableIDs = new PossiblyWeakMap();\nlet wakeableID = 0;\n\nfunction getWakeableID(wakeable) {\n  if (!wakeableIDs.has(wakeable)) {\n    wakeableIDs.set(wakeable, wakeableID++);\n  }\n\n  return wakeableIDs.get(wakeable);\n}\n\nexport function logComponentSuspended(componentName, wakeable) {\n  if (__DEV__) {\n    if (enableDebugTracing) {\n      const id = getWakeableID(wakeable);\n      const display = wakeable.displayName || wakeable;\n      log(`%c⚛️%c ${componentName} suspended`, REACT_LOGO_STYLE, 'color: #80366d; font-weight: bold;', id, display);\n      wakeable.then(() => {\n        log(`%c⚛️%c ${componentName} resolved`, REACT_LOGO_STYLE, 'color: #80366d; font-weight: bold;', id, display);\n      }, () => {\n        log(`%c⚛️%c ${componentName} rejected`, REACT_LOGO_STYLE, 'color: #80366d; font-weight: bold;', id, display);\n      });\n    }\n  }\n}\nexport function logLayoutEffectsStarted(lanes) {\n  if (__DEV__) {\n    if (enableDebugTracing) {\n      group(`%c⚛️%c layout effects%c (${formatLanes(lanes)})`, REACT_LOGO_STYLE, '', 'font-weight: normal;');\n    }\n  }\n}\nexport function logLayoutEffectsStopped() {\n  if (__DEV__) {\n    if (enableDebugTracing) {\n      groupEnd();\n    }\n  }\n}\nexport function logPassiveEffectsStarted(lanes) {\n  if (__DEV__) {\n    if (enableDebugTracing) {\n      group(`%c⚛️%c passive effects%c (${formatLanes(lanes)})`, REACT_LOGO_STYLE, '', 'font-weight: normal;');\n    }\n  }\n}\nexport function logPassiveEffectsStopped() {\n  if (__DEV__) {\n    if (enableDebugTracing) {\n      groupEnd();\n    }\n  }\n}\nexport function logRenderStarted(lanes) {\n  if (__DEV__) {\n    if (enableDebugTracing) {\n      group(`%c⚛️%c render%c (${formatLanes(lanes)})`, REACT_LOGO_STYLE, '', 'font-weight: normal;');\n    }\n  }\n}\nexport function logRenderStopped() {\n  if (__DEV__) {\n    if (enableDebugTracing) {\n      groupEnd();\n    }\n  }\n}\nexport function logForceUpdateScheduled(componentName, lane) {\n  if (__DEV__) {\n    if (enableDebugTracing) {\n      log(`%c⚛️%c ${componentName} forced update %c(${formatLanes(lane)})`, REACT_LOGO_STYLE, 'color: #db2e1f; font-weight: bold;', '');\n    }\n  }\n}\nexport function logStateUpdateScheduled(componentName, lane, payloadOrAction) {\n  if (__DEV__) {\n    if (enableDebugTracing) {\n      log(`%c⚛️%c ${componentName} updated state %c(${formatLanes(lane)})`, REACT_LOGO_STYLE, 'color: #01a252; font-weight: bold;', '', payloadOrAction);\n    }\n  }\n}","map":{"version":3,"names":["enableDebugTracing","nativeConsole","console","nativeConsoleLog","pendingGroupArgs","printedGroupIndex","formatLanes","laneOrLanes","toString","padStart","group","groupArgs","push","log","groupEnd","pop","length","i","REACT_LOGO_STYLE","logCommitStarted","lanes","__DEV__","logCommitStopped","PossiblyWeakMap","WeakMap","Map","wakeableIDs","wakeableID","getWakeableID","wakeable","has","set","get","logComponentSuspended","componentName","id","display","displayName","then","logLayoutEffectsStarted","logLayoutEffectsStopped","logPassiveEffectsStarted","logPassiveEffectsStopped","logRenderStarted","logRenderStopped","logForceUpdateScheduled","lane","logStateUpdateScheduled","payloadOrAction"],"sources":["E:/react-test/src/react/packages/react-reconciler/src/DebugTracing.js"],"sourcesContent":["/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow\r\n */\r\n\r\nimport type {Lane, Lanes} from './ReactFiberLane.old';\r\nimport type {Wakeable} from 'shared/ReactTypes';\r\n\r\nimport {enableDebugTracing} from 'shared/ReactFeatureFlags';\r\n\r\nconst nativeConsole: Object = console;\r\nlet nativeConsoleLog: null | Function = null;\r\n\r\nconst pendingGroupArgs: Array<any> = [];\r\nlet printedGroupIndex: number = -1;\r\n\r\nfunction formatLanes(laneOrLanes: Lane | Lanes): string {\r\n  return '0b' + (laneOrLanes: any).toString(2).padStart(31, '0');\r\n}\r\n\r\nfunction group(...groupArgs): void {\r\n  pendingGroupArgs.push(groupArgs);\r\n\r\n  if (nativeConsoleLog === null) {\r\n    nativeConsoleLog = nativeConsole.log;\r\n    nativeConsole.log = log;\r\n  }\r\n}\r\n\r\nfunction groupEnd(): void {\r\n  pendingGroupArgs.pop();\r\n  while (printedGroupIndex >= pendingGroupArgs.length) {\r\n    nativeConsole.groupEnd();\r\n    printedGroupIndex--;\r\n  }\r\n\r\n  if (pendingGroupArgs.length === 0) {\r\n    nativeConsole.log = nativeConsoleLog;\r\n    nativeConsoleLog = null;\r\n  }\r\n}\r\n\r\nfunction log(...logArgs): void {\r\n  if (printedGroupIndex < pendingGroupArgs.length - 1) {\r\n    for (let i = printedGroupIndex + 1; i < pendingGroupArgs.length; i++) {\r\n      const groupArgs = pendingGroupArgs[i];\r\n      nativeConsole.group(...groupArgs);\r\n    }\r\n    printedGroupIndex = pendingGroupArgs.length - 1;\r\n  }\r\n  if (typeof nativeConsoleLog === 'function') {\r\n    nativeConsoleLog(...logArgs);\r\n  } else {\r\n    nativeConsole.log(...logArgs);\r\n  }\r\n}\r\n\r\nconst REACT_LOGO_STYLE =\r\n  'background-color: #20232a; color: #61dafb; padding: 0 2px;';\r\n\r\nexport function logCommitStarted(lanes: Lanes): void {\r\n  if (__DEV__) {\r\n    if (enableDebugTracing) {\r\n      group(\r\n        `%c⚛️%c commit%c (${formatLanes(lanes)})`,\r\n        REACT_LOGO_STYLE,\r\n        '',\r\n        'font-weight: normal;',\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport function logCommitStopped(): void {\r\n  if (__DEV__) {\r\n    if (enableDebugTracing) {\r\n      groupEnd();\r\n    }\r\n  }\r\n}\r\n\r\nconst PossiblyWeakMap = typeof WeakMap === 'function' ? WeakMap : Map;\r\n// $FlowFixMe: Flow cannot handle polymorphic WeakMaps\r\nconst wakeableIDs: WeakMap<Wakeable, number> = new PossiblyWeakMap();\r\nlet wakeableID: number = 0;\r\nfunction getWakeableID(wakeable: Wakeable): number {\r\n  if (!wakeableIDs.has(wakeable)) {\r\n    wakeableIDs.set(wakeable, wakeableID++);\r\n  }\r\n  return ((wakeableIDs.get(wakeable): any): number);\r\n}\r\n\r\nexport function logComponentSuspended(\r\n  componentName: string,\r\n  wakeable: Wakeable,\r\n): void {\r\n  if (__DEV__) {\r\n    if (enableDebugTracing) {\r\n      const id = getWakeableID(wakeable);\r\n      const display = (wakeable: any).displayName || wakeable;\r\n      log(\r\n        `%c⚛️%c ${componentName} suspended`,\r\n        REACT_LOGO_STYLE,\r\n        'color: #80366d; font-weight: bold;',\r\n        id,\r\n        display,\r\n      );\r\n      wakeable.then(\r\n        () => {\r\n          log(\r\n            `%c⚛️%c ${componentName} resolved`,\r\n            REACT_LOGO_STYLE,\r\n            'color: #80366d; font-weight: bold;',\r\n            id,\r\n            display,\r\n          );\r\n        },\r\n        () => {\r\n          log(\r\n            `%c⚛️%c ${componentName} rejected`,\r\n            REACT_LOGO_STYLE,\r\n            'color: #80366d; font-weight: bold;',\r\n            id,\r\n            display,\r\n          );\r\n        },\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport function logLayoutEffectsStarted(lanes: Lanes): void {\r\n  if (__DEV__) {\r\n    if (enableDebugTracing) {\r\n      group(\r\n        `%c⚛️%c layout effects%c (${formatLanes(lanes)})`,\r\n        REACT_LOGO_STYLE,\r\n        '',\r\n        'font-weight: normal;',\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport function logLayoutEffectsStopped(): void {\r\n  if (__DEV__) {\r\n    if (enableDebugTracing) {\r\n      groupEnd();\r\n    }\r\n  }\r\n}\r\n\r\nexport function logPassiveEffectsStarted(lanes: Lanes): void {\r\n  if (__DEV__) {\r\n    if (enableDebugTracing) {\r\n      group(\r\n        `%c⚛️%c passive effects%c (${formatLanes(lanes)})`,\r\n        REACT_LOGO_STYLE,\r\n        '',\r\n        'font-weight: normal;',\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport function logPassiveEffectsStopped(): void {\r\n  if (__DEV__) {\r\n    if (enableDebugTracing) {\r\n      groupEnd();\r\n    }\r\n  }\r\n}\r\n\r\nexport function logRenderStarted(lanes: Lanes): void {\r\n  if (__DEV__) {\r\n    if (enableDebugTracing) {\r\n      group(\r\n        `%c⚛️%c render%c (${formatLanes(lanes)})`,\r\n        REACT_LOGO_STYLE,\r\n        '',\r\n        'font-weight: normal;',\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport function logRenderStopped(): void {\r\n  if (__DEV__) {\r\n    if (enableDebugTracing) {\r\n      groupEnd();\r\n    }\r\n  }\r\n}\r\n\r\nexport function logForceUpdateScheduled(\r\n  componentName: string,\r\n  lane: Lane,\r\n): void {\r\n  if (__DEV__) {\r\n    if (enableDebugTracing) {\r\n      log(\r\n        `%c⚛️%c ${componentName} forced update %c(${formatLanes(lane)})`,\r\n        REACT_LOGO_STYLE,\r\n        'color: #db2e1f; font-weight: bold;',\r\n        '',\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport function logStateUpdateScheduled(\r\n  componentName: string,\r\n  lane: Lane,\r\n  payloadOrAction: any,\r\n): void {\r\n  if (__DEV__) {\r\n    if (enableDebugTracing) {\r\n      log(\r\n        `%c⚛️%c ${componentName} updated state %c(${formatLanes(lane)})`,\r\n        REACT_LOGO_STYLE,\r\n        'color: #01a252; font-weight: bold;',\r\n        '',\r\n        payloadOrAction,\r\n      );\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}